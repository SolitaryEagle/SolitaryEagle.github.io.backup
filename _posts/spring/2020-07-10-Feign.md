---
layout: post
title: Feign
category: spring
tags: spring
---
# 参考文章
> [Feign 原理图解 - 疯狂创客圈](https://www.cnblogs.com/crazymakercircle/p/11965726.html)

Feign 组件图

![](https://raw.githubusercontent.com/OpenFeign/feign/master/src/docs/overview.png)

Feign 调用基本流程图

![](https://raw.githubusercontent.com/SolitaryEagle/SolitaryEagle.github.io/master/images/Feign%20%E8%B0%83%E7%94%A8%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

![](https://raw.githubusercontent.com/SolitaryEagle/SolitaryEagle.github.io/master/images/Feign%20%E8%B0%83%E7%94%A8%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B%E5%9B%BE2.png)

# Feign 组件
* (async)clients: 执行 http 请求的客户端
* contracts: 根据接口类的注解声明规则, 解析出底层的 MethodHandler
* encoders: 将方法参数编码为 http 请求参数
* decoders: 将 http 响应结果解码为方法返回值; ErrorDecoder -> 异常处理解码器
* metrics: 监控
# Feign 功能

# Feign 接口
## Decoder

将 HTTP 响应解码为给定类型的单个对象. 

触发条件: 
* 当 Response.status() 在 2xx 范围中, 并且
* 返回值不是 void 也不是 Response

## Encoder
将对象编码为 HTTP 请求 body. 
当方法参数没有 @Param 注解时, 会使用 javax.websocket.Encoder.Encoder

